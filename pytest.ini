# pytest.ini (raíz del repo)
[pytest]
addopts =
    -ra
    --maxfail=1
    --disable-warnings
    --cov=trading_bot
    --cov-branch
    --cov-report=term-missing:skip-covered
    -m "not network and not slow"
    --log-cli-level=INFO
testpaths = tests
python_files = test_*.py
xfail_strict = true
log_auto_indent = true

markers =
    network: tests que requieren red/API real (saltan por defecto)
    slow: tests pesados/largos (saltan por defecto)
    e2e: recorrido extremo a extremo en MockExchange
    state: maquina de estados de trades
    integration: integra varios módulos (MockExchange)
    backtest: tests del motor de backtesting (si aplica)

filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning
